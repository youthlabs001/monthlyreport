<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monthly Report - ๋์๋ณด๋</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>๐</text></svg>">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/dashboard-chart.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>
<body>
    <div class="dashboard-container">
        <!-- Header -->
        <header class="dashboard-header">
            <div class="logo">
                <h1>๐ Monthly Report</h1>
            </div>
            <div class="user-info">
                <span id="userEmail">๋ก๋ฉ ์ค...</span>
                <button class="logout-btn" id="logoutBtn">๋ก๊ทธ์์</button>
            </div>
        </header>
        
        <!-- Main Content -->
        <main class="dashboard-content">
            <!-- Welcome Section -->
            <section class="welcome-section">
                <h2><span id="companyName">๊ณ๊ฐ</span> <span id="selectedYears">2024-2025</span> ๋งค์ถ ๋ํฅ ๋น๊ต</h2>
                <p>๋งค์ถ ํํฉ๊ณผ ์ฃผ์ ์ธ์ฌ์ดํธ๋ฅผ ํ์ธํ์ธ์.</p>
            </section>
            
            <!-- Insights Section -->
            <section class="insights-section">
                <div class="insight-card growth">
                    <div class="insight-badge">๐ ์ฐ๊ฐ ๋งค์ถ ์ฑ์ฅ</div>
                    <h3 id="growthTitle">์ฐ๊ฐ ์ด ๋งค์ถ ๋ถ์</h3>
                    <p id="growthDescription">๋ฐ์ดํฐ๋ฅผ ๋ถ๋ฌ์ค๋ ์ค...</p>
                </div>
                <div class="insight-card highlight">
                    <div class="insight-badge">๐ ์๋ณ ๋งค์ถ ์ต๊ณ์</div>
                    <h3 id="peakTitle">์ต๊ณ ๋งค์ถ ์</h3>
                    <p id="peakDescription">๋ฐ์ดํฐ๋ฅผ ๋ถ๋ฌ์ค๋ ์ค...</p>
                    <div class="insight-icon" id="peakMonth">-์</div>
                </div>
            </section>
            
            <!-- Chart Section -->
            <section class="chart-section">
                <div class="section-header">
                    <h3 id="chartTitle">์๋ณ ๋งค์ถ ๋น๊ต (๋จ์: ์)</h3>
                    <div class="filter-group">
                        <select id="compareYear1">
                            <option value="2024">2024๋</option>
                            <option value="2025" selected>2025๋</option>
                            <option value="2026">2026๋</option>
                        </select>
                        <span class="vs-text">vs</span>
                        <select id="compareYear2">
                            <option value="2024" selected>2024๋</option>
                            <option value="2025">2025๋</option>
                            <option value="2026">2026๋</option>
                        </select>
                        <button class="compare-btn" id="compareBtn">๋น๊ตํ๊ธฐ</button>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="salesChart"></canvas>
                </div>
            </section>
            
            <!-- Stats Cards -->
            <section class="stats-grid">
                <div class="stat-card">
                    <h3>์ด๋ฒ ๋ฌ ๋งค์ถ</h3>
                    <div class="value" id="currentMonthSales">โฉ0</div>
                    <div class="change" id="salesChange">์์ ๋๋น -</div>
                </div>
                <div class="stat-card">
                    <h3>์ง๋ ๋ฌ ๋งค์ถ</h3>
                    <div class="value" id="lastMonthSales">โฉ0</div>
                    <div class="change">์ง๋ ๋ฌ ์ค์</div>
                </div>
                <div class="stat-card">
                    <h3>์ฌํด ๋์ ๋งค์ถ</h3>
                    <div class="value" id="yearTotalSales">โฉ0</div>
                    <div class="change" id="yearInfo">2026๋ ๋์</div>
                </div>
                <div class="stat-card">
                    <h3>ํ๊ท ์ ๋งค์ถ</h3>
                    <div class="value" id="avgMonthlySales">โฉ0</div>
                    <div class="change">์ฌํด ํ๊ท</div>
                </div>
            </section>
            
            <!-- Additional Insights -->
            <section class="insights-detail-section">
                <div class="section-header">
                    <h3>๐ ์์ธ ๋ถ์ ๋ฆฌํฌํธ</h3>
                </div>
                <div class="insights-content" id="insightsContent">
                    <div class="loading">
                        <div class="spinner"></div>
                    </div>
                </div>
            </section>
            
            <!-- Monthly Report Table -->
            <section class="report-section">
                <div class="section-header">
                    <h3>์๋ณ ๋งค์ถ ํํฉ</h3>
                    <div class="filter-group">
                        <select id="categoryFilter">
                            <option value="summary">์๋ณ ํฉ๊ณ</option>
                            <option value="all">์์ฒด (์ข๋ฅ๋ณ ์์ธ)</option>
                        </select>
                        <select id="yearFilter">
                            <option value="2026">2026๋</option>
                            <option value="2025">2025๋</option>
                            <option value="2024">2024๋</option>
                        </select>
                    </div>
                </div>
                
                <div id="tableContainer">
                    <div class="loading">
                        <div class="spinner"></div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- ์์ธ ๋งค์ถ ๋ชจ๋ฌ -->
    <div class="modal-overlay" id="detailModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalTitle">2025๋ 12์ ๋งค์ถ ์์ธ</h3>
                <button class="modal-close" id="modalClose">&times;</button>
            </div>
            <div class="modal-body" id="modalBody">
                <div class="loading">
                    <div class="spinner"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Supabase SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.39.0/dist/umd/supabase.min.js"></script>
    <script src="js/config.js"></script>
    <script src="js/dashboard.js"></script>
</body>
</html>
